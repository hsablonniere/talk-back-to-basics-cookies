= Story

[#poster-intro%hardbreaks]
intro

[#poster-welcome%hardbreaks]
#mode normal (et énergique)#
Bonjour à *toutes* et tous !
J'm'appelle Hubert Sablonnière,
J'suis développeur Web chez #Clever Cloud#.

[#clever-cloud%hardbreaks]
Qui connait Clever Cloud ?

[#back-to-1994%hardbreaks]
~

[#lou-montulli%hardbreaks]
~

[#netscape%hardbreaks]
~

[#fishcam%hardbreaks]
~

[#lynx%hardbreaks]
~

[#lynx-screenshot%hardbreaks]
~

[#blink-tag%hardbreaks]
~

[#animated-gifs%hardbreaks]
~

[#animated-gifs-example%hardbreaks]
~

[#lou-and-cookies%hardbreaks]
C'est surtout l'inventeur des cookies HTTP.
Brevet !

[#section-dev%hardbreaks]
~

[#question-what-are-cookies%hardbreaks]
~

[#rfcs-01%hardbreaks]
~

[#rfcs-02%hardbreaks]
~

[#rfcs-03%hardbreaks]
~

[#rfcs-04%hardbreaks]
~

[#rfcs-05%hardbreaks]
~

[#demo-simple-cookie%hardbreaks]
~

[#question-cookie-storage-duration%hardbreaks]
~

[#question-when-are-cookies-sent%hardbreaks]
~

[#demo-domain-cookie%hardbreaks]
~

[#question-a-cookie-on-dot-com%hardbreaks]
~

[#no-dot-com-cookie%hardbreaks]
~

[#screenshot-bugzilla-issue-dot-co-dot-uk%hardbreaks]
~

[#screenshot-dxr-mozilla-org-mozilla-central-source-netwerk-dns-effec
~

[#rfc-6265-public-suffix%hardbreaks]
~

[#screenshot-bugzilla-mozilla-org-show-bug-cgi-id-342314%hardbreaks]
~

[#screenshot-bugzilla-mozilla-org-show-bug-cgi-id-9422%hardbreaks]
~

[#screenshot-chromium-googlesource-com-chromium-src-net-master-base-r
~

[#screenshot-github-com-gnome-libsoup-blob-master-data-effective-tld-
~

[#screenshot-github-com-webkit-webkit-blob-master-source-webcore-plat
~

[#screenshot-publicsuffix-org%hardbreaks]
~

[#screenshot-wiki-mozilla-org-public-suffix-list%hardbreaks]
~

[#question-cookie-port-verification%hardbreaks]
~

[#gif-no-port-cookie%hardbreaks]
~

[#screenshot-caniuse-fetch%hardbreaks]
~

[#question-what-is-csrf%hardbreaks]
~

[#rfcs-05-again%hardbreaks]
~

[#screenshot-caniuse-samesite-cookies%hardbreaks]
~

[#question-who-can-read-cookies%hardbreaks]
~

[#blank-foo%hardbreaks]
~

[#document-cookie%hardbreaks]
~

[#demo-document-cookie%hardbreaks]
~

[#question-xss-attack%hardbreaks]
~

[#question-cookie-alternatives%hardbreaks]
~

[#window-name%hardbreaks]
~

[#demo-window-name%hardbreaks]
~

[#web-storage%hardbreaks]
~

[#demo-web-storage%hardbreaks]
~

[#question-cnil-dev%hardbreaks]
~

[#cnil-conformity%hardbreaks]
~

[#cnil-the-law%hardbreaks]
~

[#section-tracker%hardbreaks]
~

[#demo-third-party-cookie%hardbreaks]
~

[#question-what-is-referer%hardbreaks]
~

[#question-what-is-a-super-cookie%hardbreaks]
~

[#tracking-without-javascript%hardbreaks]
~

[#demo-etag-cookie%hardbreaks]
~

[#tracking-with-javascript%hardbreaks]
~

[#tracking-with-javascript-01%hardbreaks]
~

[#tracking-with-javascript-02%hardbreaks]
~

[#evercookie%hardbreaks]
~

[#evercookie-list%hardbreaks]
~

[#section-web-citizen%hardbreaks]
~

[#question%hardbreaks]
~

[#browser-cookie-settings%hardbreaks]
~

[#demo-browser-cookie-settings%hardbreaks]
~

[#browser-referer-settings%hardbreaks]
~

[#demo-referer-settings%hardbreaks]
~

[#question-cookies-sqlite%hardbreaks]
~

[#demo-cookies-sqlite%hardbreaks]
~

[#question-browser-extensions%hardbreaks]
~

[#screenshot-https-everywhere%hardbreaks]
~

[#screenshot-adblockplus%hardbreaks]
~

[#screenshot-ghostery%hardbreaks]
~

[#screenshot-disconnect%hardbreaks]
~

[#screenshot-privacy-badger%hardbreaks]
~

[#screenshot-noscript%hardbreaks]
~

[#screenshot-panopticlick%hardbreaks]
~

[#question-private-browsing%hardbreaks]
~

[#question-free-wifi%hardbreaks]
~

[#question-cnil-citizen%hardbreaks]
~

[#back-to-2018%hardbreaks]
~

[#sherlock-outro%hardbreaks]
~

[#poster-thx%hardbreaks]
~

[#question-questions%hardbreaks]
~


// https://emojipedia.org/sleuth-or-spy/
// https://emojipedia.org/man/

// pourquoi commencer par une histoire ?
// * c'est fun et ça intrigue les gens dès le début
// pourquoi Sherlock ?
// * parceque l'idée est de revenir sur une vieille affaire : le rôle des cookies dans le Web
// * parceque l'idée est de s'intéresser au faits et que le public puisse avoir les connaissances et les outils pour se débrouiller par lui même

W: Bonjour Sherlock, j'ai fait aussi vite que possible. Que se passe t-il ?
S: Et bien, mon cher Watson, je suis troublé.
S: Je suis allé à une conférence de développeurs et j'étais étonné de constater que la plupart des enquêtes portaient sur des nouvelles technologies.
W: Oh yes, mais c'est normal, les gens viennent pour se tenir au courant des dernières nouveautés...
S: Oui Watson mais du coup on délaisse les sujets un peu moins fashion et qiu sont tout aussi importants.
W: Lesquels par exemple ?
Et bien
J'ai demandé à Hubert Sablonnière de mener l'enquête sur cette affaire.
Un français ?
Oui mais il ressemble bcp à prince Harry so...
Comme il n'est pas expert/consultant en sécurité mais plutôt développeur,
je lui ai demandé d'analyser les faits et de les exposer à ces confrères et consoeurs.
Ainsi au lieu de donner des conseils tout fait,
il sera plutôt là pour expliquer comment tout cela fonctionne et les gens se feront leur propre idée en fonction de leurs contexte respectif.

== Introduction

* Il était une fois le Web
** Tim Berners Lee
*** On parle pas souvent de lui mais aujourd'hui j'aimerai vous parler de
** Lou Montulli
*** Il est à l'origine de bcp de choses qu'on utilise encore aujourd'hui
**** Netscape
**** lynx (démo site de la conf)
**** fishcam
**** Gifs animés
**** <blink>
**** Cookies

== Point de vue n°1 : le/la dev qui veut sécuriser son site Web

* Histoire RFCs
* Les cookies c'est quoi ?
** Diagramme de séquence (simple)
** Le serveur dit : "stocke ça et renvoie le moi quand tu reviens"
** Démo dans le browser (simple)
* Combien de temps c'est stocké ?
** Expires & Max-Age attribute
*Quand est-ce que les cookies sont envoyé automatiquement ?
** Domain attribute

*** Root domain

**** default
***** readable by root domain
***** NOT readable by sub domains
***** appears as strict "root.tld" in devtools
***** host-only-flag is set to true

**** explicit "domain=root.tld"
***** readable by root domain
***** readable by sub domains
***** appears as ".root.tld" in devtools
***** host-only-flag is set to false

**** explicit "domain=one.root.tld"
***** NOT stored

*** subdomain sub

**** default
***** readable by root domain
***** NOT readable by other sub domains
***** appears as strict "one.root.tld" in devtools
***** host-only-flag is set to true

**** explicit "domain=root.tld"
***** readable by root domain
***** readable by sub domains
***** appears as ".root.tld" in devtools
***** host-only-flag is set to false

**** explicit "domain=one.root.tld"
***** NOT readable by root domain
***** NOT readable by sub domains
***** appears as ".one.root.tld" in devtools
***** host-only-flag is set to false

**** explicit "domain=two.root.tld"
***** NOT stored

*** Par défaut: Set by root domain => unaccessible by any subdomain
**** domain value in devtools is exact full host
*** Par défaut: Set by subdomain => unaccessible by root or other subdomain
**** domain value in devtools is exact full host
*** Set by root domain to root domain => accessible by any subdomain
**** domain value in devtools is cookie domain value prefixed with a dot "."

*** Problème de TLD

** Path attribute
*** Pas vraiment un gage de sécurité

** Secure attribute
*** Can still be set/overriden by in non secured HTTP on some browsers
**** https://www.chromestatus.com/features/4506322921848832
**** https://tools.ietf.org/html/draft-ietf-httpbis-cookie-alone-01
**** Chrome 58+
**** Opera 45+
**** Firefox 52+
*** HSTS

** Pas de vérif sur le port
*** proposition dans la RFC 2

** Qu'est ce qu'une attaque CSRF ?
*** Cross-Site Script Inclusion
*** Démo
*** JSONP
** SameSite attribute (nouveau/draft)
*** https://tools.ietf.org/html/draft-ietf-httpbis-cookie-same-site-00
*** https://www.sjoerdlangkemper.nl/2016/04/14/preventing-csrf-with-samesite-cookie-attribute/
** La SOP et ce que ça veut dire origin?
*** https://tools.ietf.org/html/draft-west-origin-cookies-01
** Le CORS
** XHR
** fetch

* Qui peut lire quels cookies ?
** MITM (Secure attribute)
** Qu'est ce qu'une attaque XSS ?
** Fonctionnement de document.cookie (demo?)
** HTTPOnly attribute
** Cookie prefixes (nouveau/draft)

* Quelles alternatives pour un stockage local de session?
** window.name
** WebStorage

== Point de vue n°2 : l'espion.ne qui traque les visiteu.rs.ses

* Concept de cookie tiers (rappel CSRF)
** Demo
* Header problématiques
** Referer
*** Policy qui vont avec
* Détournement
** ETag
** Date
** HSTS
** Other super-cookies

// dès que il y a de l'état => possibilité de tracking

// Evercookie is a JavaScript-based application created by Samy Kamkar which produces zombie cookies in a web browser that are intentionally difficult to delete%hardbreaks] citing Evercookie as a method of tracking Tor users.

== Point de vue n°3 : le/la citoyen.ne du Web (soucieux de sa vie privée)

* Réglages navigateur
** Cookies (expiration, tiers)
** Referer policy
** Policies FireFox
** Policies Safari
* Où (et comment) sont stockés les cookies sur la machine ?
* Outils
* https://disconnect.me/
* https://www.eff.org/privacybadger
* https://www.ghostery.com/
* https://www.eff.org/https-everywhere
* https://www.ublock.org/
* https://adblockplus.org/fr/
* https://noscript.net/
* Point CNIL
* WiFi gratuit
* Navigation privée

== Conclusion

La vie privée, c'est compliqué
Je ne vous ai pas donné de recette toute faite pour utiliser les cookies ou naviguer correctement sur le Web mais j'espère vous avoir donné les faits et les bons réflexes pour comprendre ce qu'il se passe dans votre navigateur...

[#poster-outro%hardbreaks]
~

Merci beaucoup !!
